language: csharp
dotnet: 2.1.4
mono: none
sudo: required
services:
  - docker
env:
  global:
  - DOTNET_CLI_TELEMETRY_OPTOUT: 0
script:
- dotnet build rsoi_app.sln -c Release
- dotnet test -c Release --no-build rsoi_app_tests/rsoi_app_tests.csproj /p:CollectCoverage=true
  /p:CoverletOutputFormat=opencover
-  dotnet publish -c Release
- cp dockerfile ./rsoi-app/bin/release/netcoreapp2.0/publish/dockerfile
after_script:
- bash <(curl -s https://codecov.io/bash)
deploy:
  provider: heroku
  api_key: 2df9ee79-d8e7-4022-b9a1-672049cbb2f9